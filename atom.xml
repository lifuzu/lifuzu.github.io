<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Build and Release]]></title>
  <link href="http://lifuzu.com/atom.xml" rel="self"/>
  <link href="http://lifuzu.com/"/>
  <updated>2015-01-16T17:58:01-08:00</updated>
  <id>http://lifuzu.com/</id>
  <author>
    <name><![CDATA[Richard Lee]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Programming for Android: Download, Progressbar and FileProvider]]></title>
    <link href="http://lifuzu.com/blog/2015/01/16/programming-for-android-download/"/>
    <updated>2015-01-16T17:50:20-08:00</updated>
    <id>http://lifuzu.com/blog/2015/01/16/programming-for-android-download</id>
    <content type="html"><![CDATA[<p><img src="https://turbotax.intuit.com/handlebars/noncampaign/hp/images/melissa-tablet.jpg" alt="enter image description here" />
In this article, we try to download a file from Internet, show the progress of downloading, then share the file to gallery for displaying with FileProvider.</p>

<p><strong>Keywords</strong>: Android, Programming, Download, Image, Progressbar, FileProvider</p>

<p><strong>Prerequisites</strong>:</p>

<p><em>0</em>. Create an Android project with name: FileProviderExample, you can also clone this project directly from github here: [<a href="https://github.com/lifuzu/FileProviderExample">3</a>]</p>

<p><strong>Steps</strong>:</p>

<p><em>1</em>. Download</p>

<p>We intend to download an image file with foreground mode since we want to block the consequent actions until the download process is complete. If you try to download file(s) with background mode, please reference some other articles <a href="http://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog">here</a></p>

<!--more-->


<p>Update the activity layout file <code>res/layout/activity_main.xml</code> to add a button for downloading:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;Button</span>
</span><span class='line'>    <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>    <span class="na">android:id=</span><span class="s">&quot;@+id/btnDownload&quot;</span>
</span><span class='line'>    <span class="na">android:onClick=</span><span class="s">&quot;startDownload&quot;</span>
</span><span class='line'>    <span class="na">android:text=</span><span class="s">&quot;Download Image&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>With the above update, we need to define a function named <code>startDownload</code> to trigger the download process:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">startDownload</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">download</span><span class="o">(</span><span class="s">&quot;http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg&quot;</span><span class="o">,</span> <span class="s">&quot;abc.jpg&quot;</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we download an image from the above URL, and save it to direct local path with the name <code>abc.jpg</code>.</p>

<p>We design the download interface with a simple way. For the download function, what we want is a URL then a local file path that we saved the URL:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">download</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">strUrl</span><span class="o">,</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">fileName</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>With the <code>Thread</code> support, we create the download precedure:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="nd">@Override</span>
</span><span class='line'>        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">getFilesDir</span><span class="o">(),</span> <span class="n">fileName</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">strUrl</span><span class="o">);</span>
</span><span class='line'>                <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;FILE_NAME&quot;</span><span class="o">,</span> <span class="s">&quot;File name is &quot;</span> <span class="o">+</span> <span class="n">fileName</span><span class="o">);</span>
</span><span class='line'>                <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;FILE_URL&quot;</span><span class="o">,</span> <span class="s">&quot;File URL is &quot;</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>
</span><span class='line'>                <span class="n">URLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
</span><span class='line'>                <span class="n">connection</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>
</span><span class='line'>                <span class="c1">// get the file length</span>
</span><span class='line'>                <span class="kt">int</span> <span class="n">fileLength</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">getContentLength</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>                <span class="c1">// download the file</span>
</span><span class='line'>                <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedInputStream</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">());</span>
</span><span class='line'>                <span class="n">OutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>                <span class="kt">byte</span> <span class="n">data</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
</span><span class='line'>                <span class="kt">long</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class='line'>                <span class="kt">int</span> <span class="n">count</span><span class="o">;</span>
</span><span class='line'>                <span class="k">while</span> <span class="o">((</span><span class="n">count</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                    <span class="n">total</span> <span class="o">+=</span> <span class="n">count</span><span class="o">;</span>
</span><span class='line'>                    <span class="c1">// increase progress bar here</span>
</span><span class='line'>                    <span class="c1">// write data into file</span>
</span><span class='line'>                    <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
</span><span class='line'>                <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>                <span class="c1">// flush output and close streams</span>
</span><span class='line'>                <span class="n">output</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
</span><span class='line'>                <span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>                <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>                <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;ERROR ON DOWNLOADING FILES&quot;</span><span class="o">,</span> <span class="s">&quot;ERROR IS&quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">}).</span><span class="na">start</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>From the above code, we save the file just direct local path, without any more directory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>            <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">getFilesDir</span><span class="o">(),</span> <span class="n">fileName</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>And then we call <code>URLConnection</code> to connect the URL which we want to download:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>                <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="n">strUrl</span><span class="o">);</span>
</span><span class='line'>                <span class="n">URLConnection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
</span><span class='line'>                <span class="n">connection</span><span class="o">.</span><span class="na">connect</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Read the input stream write to output stream recursively, until the input stream reach the end:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>                <span class="n">InputStream</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedInputStream</span><span class="o">(</span><span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">());</span>
</span><span class='line'>                <span class="n">OutputStream</span> <span class="n">output</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>                <span class="kt">byte</span> <span class="n">data</span><span class="o">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">];</span>
</span><span class='line'>                <span class="kt">long</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</span><span class='line'>                <span class="kt">int</span> <span class="n">count</span><span class="o">;</span>
</span><span class='line'>                <span class="k">while</span> <span class="o">((</span><span class="n">count</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                    <span class="n">total</span> <span class="o">+=</span> <span class="n">count</span><span class="o">;</span>
</span><span class='line'>                    <span class="n">output</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">count</span><span class="o">);</span>
</span><span class='line'>                <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then flush the output incase some data left in memory, and close the streams:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>                <span class="n">output</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
</span><span class='line'>                <span class="n">output</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span><span class='line'>                <span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>One more thing before compiling a successful application is to check permission, we need an Internet permission to download the image. We need to add the permission into <code>manifests/AndroidManifest.xml</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&quot;android.permission.INTERNET&quot;</span><span class="nt">&gt;&lt;/uses-permission&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>To verify the download function, run the application on Android device, click the button <code>DOWNLOAD IMAGE</code>
<img src="https://lh4.googleusercontent.com/ttxff19bogmzdV1aX7HC-JsiB4w0irGnqvj1Z3JPf-4=s600" title="Screen Shot 2015-01-16 at 10.08.35 AM.png" alt="enter image description here" />
Nothing seems happen, since we do not have any vision way to indicate the download progress is completed right now. For verification, we need adb to enter Android file system to have a file check.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>adb devices
</span><span class='line'><span class="nv">$ </span>adb shell
</span><span class='line'>root@vbox86tp:/ <span class="c">#  ls /data/data/com.example.rlee.fileproviderexample/files/</span>
</span><span class='line'>abc.jpg
</span></code></pre></td></tr></table></div></figure>


<p>Cool, the file <code>abc.jpg</code> is downloaded from the URL <code>http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg</code>. You even would like to pull the file into desktop then have an exact content check:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>adb pull /data/data/com.example.rlee.fileproviderexample/files/abc.jpg
</span></code></pre></td></tr></table></div></figure>


<p>Then open it in File Explorer (like Finder for Mac OS), and open the URL in brower (like Chrome) to have a comparison.</p>

<p><em>2</em>. Progressbar to show the status of download</p>

<p>To display the status of downloading, we need ProgressDialog component, which will show a progress indicator and an optional text message or view.</p>

<p>We need add a declaration for the ProgressDialog in the class <code>MainActivity</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// Progress Bar</span>
</span><span class='line'><span class="n">ProgressDialog</span> <span class="n">progressDialog</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Initialize the variable with activity instance under the function <code>onCreate</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="n">progressDialog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProgressDialog</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>When we start to download the image, we need to set the initial state for the progress bar:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="n">progressDialog</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;Downloading Image ...&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">progressDialog</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="s">&quot;Download in progress ...&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">progressDialog</span><span class="o">.</span><span class="na">setProgressStyle</span><span class="o">(</span><span class="n">progressDialog</span><span class="o">.</span><span class="na">STYLE_HORIZONTAL</span><span class="o">);</span>
</span><span class='line'>    <span class="n">progressDialog</span><span class="o">.</span><span class="na">setProgress</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</span><span class='line'>    <span class="n">progressDialog</span><span class="o">.</span><span class="na">setMax</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
</span><span class='line'>    <span class="n">progressDialog</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>And we have the image size which we will download:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>                <span class="c1">// get the file length</span>
</span><span class='line'>                <span class="kt">int</span> <span class="n">fileLength</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">getContentLength</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>After we read and write some partial data, we update the state for progress bar:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>                    <span class="c1">// increase progress bar here</span>
</span><span class='line'>                    <span class="n">progressDialog</span><span class="o">.</span><span class="na">setProgress</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">total</span><span class="o">*</span><span class="mi">100</span><span class="o">)/</span><span class="n">fileLength</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>At last, when we complete the download, we dismiss the progress bar:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>                <span class="c1">// dismiss the progress bar</span>
</span><span class='line'>                <span class="n">progressDialog</span><span class="o">.</span><span class="na">dismiss</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>To verify the progress bar, try to find a big jpg image file on Internet, then replace the URL in download function.
Run the application on Android device, click the button <code>DOWNLOAD IMAGE</code> again, you should see the progressbar like this:
<img src="https://lh4.googleusercontent.com/-dqDPYup6e6w/VLlh3vI0zlI/AAAAAAAACuE/kbQ1Gxy6Kv0/s600/Screen+Shot+2015-01-16+at+11.08.44+AM.png" title="Screen Shot 2015-01-16 at 11.08.44 AM.png" alt="enter image description here" /></p>

<p><em>3</em>. Show the file with FileProvider</p>

<p>Android do NOT allow apps to access the private folder of another application. To share our downloaded image, we have to offer the image to other applications from our side. With FileProvider, we can share the file in my own app domain to other apps.</p>

<p>For FileProvider, we need to add the provider element in android manifest file <code>manifests/AndroidManifest.xml</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'>    <span class="nt">&lt;provider</span>
</span><span class='line'>        <span class="na">android:authorities=</span><span class="s">&quot;com.example.rlee.fileproviderexample.fileprovider&quot;</span>
</span><span class='line'>        <span class="na">android:name=</span><span class="s">&quot;android.support.v4.content.FileProvider&quot;</span>
</span><span class='line'>        <span class="na">android:grantUriPermissions=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>        <span class="na">android:exported=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;meta-data</span>
</span><span class='line'>            <span class="na">android:name=</span><span class="s">&quot;android.support.FILE_PROVIDER_PATHS&quot;</span>
</span><span class='line'>            <span class="na">android:resource=</span><span class="s">&quot;@xml/filepaths&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/provider&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>then add a new file under <code>res/xml</code> with the name <code>filepaths.xml</code> (create the xml folder if it does not exist), with the content:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;paths</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;files-path</span> <span class="na">path=</span><span class="s">&quot;.&quot;</span> <span class="na">name=</span><span class="s">&quot;image&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/paths&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add another button to trigger an intent to display the image in <code>res/layout/activity_main.xml</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;Button</span>
</span><span class='line'>    <span class="na">android:layout_width=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>    <span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>    <span class="na">android:id=</span><span class="s">&quot;@+id/btnDisplay&quot;</span>
</span><span class='line'>    <span class="na">android:onClick=</span><span class="s">&quot;startDisplay&quot;</span>
</span><span class='line'>    <span class="na">android:text=</span><span class="s">&quot;Display Image......&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create the function <code>startDisplay</code>, which defined in the above code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">startDisplay</span><span class="o">(</span><span class="n">View</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">// show jpg in gallery</span>
</span><span class='line'>    <span class="n">File</span> <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">getFilesDir</span><span class="o">(),</span> <span class="s">&quot;abc.jpg&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">Uri</span> <span class="n">fileUri</span> <span class="o">=</span> <span class="n">FileProvider</span><span class="o">.</span><span class="na">getUriForFile</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">&quot;com.example.rlee.fileproviderexample.fileprovider&quot;</span><span class="o">,</span> <span class="n">file</span><span class="o">);</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">setDataAndType</span><span class="o">(</span><span class="n">fileUri</span><span class="o">,</span> <span class="s">&quot;image/*&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">addFlags</span><span class="o">(</span>
</span><span class='line'>            <span class="n">Intent</span><span class="o">.</span><span class="na">FLAG_GRANT_READ_URI_PERMISSION</span><span class="o">);</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">&quot;FILE_URI&quot;</span><span class="o">,</span> <span class="s">&quot;File Uri is &quot;</span> <span class="o">+</span> <span class="n">Uri</span><span class="o">.</span><span class="na">fromFile</span><span class="o">(</span><span class="n">file</span><span class="o">));</span>
</span><span class='line'>    <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>To verify the display function, run the application on Android device, click the button <code>DISPLAY IMAGE ......</code>
<img src="https://lh5.googleusercontent.com/-9CgNpo_-BFI/VLlT17IEKMI/AAAAAAAACtc/O2ec7Ia5Uj0/s600/Screen+Shot+2015-01-16+at+10.08.35+AM.png" title="Screen Shot 2015-01-16 at 10.08.35 AM.png" alt="enter image description here" />
Then the image will be displayed by the Android Gallery application:
<img src="https://lh6.googleusercontent.com/-X3R3BNX123M/VLlUKn-K1EI/AAAAAAAACto/IHuToVCF8wI/s600/Screen+Shot+2015-01-16+at+10.08.56+AM.png" title="Screen Shot 2015-01-16 at 10.08.56 AM.png" alt="enter image description here" /></p>

<p>If you have any question, please add comments below or submit issues <a href="https://github.com/lifuzu/FileProviderExample/issues">here</a>.</p>

<p>Have fun to try!</p>

<p><strong>Tips</strong>:
<a href="https://www.genymotion.com/?utm_source=dlvr.it&amp;utm_medium=twitter#!/product">Genymotion</a> might be your friend.</p>

<p><strong>References</strong>:</p>

<ol>
<li><a href="https://developer.android.com/training/secure-file-sharing/setup-sharing.html">https://developer.android.com/training/secure-file-sharing/setup-sharing.html</a></li>
<li><a href="https://developer.android.com/training/secure-file-sharing/share-file.html">https://developer.android.com/training/secure-file-sharing/share-file.html</a></li>
<li><a href="https://github.com/lifuzu/FileProviderExample">https://github.com/lifuzu/FileProviderExample</a></li>
<li><a href="http://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog">http://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Design a Reuse and 'De-use' Modularized Software System]]></title>
    <link href="http://lifuzu.com/blog/2015/01/14/design-a-reuse-and-de-use-modularized-software-system/"/>
    <updated>2015-01-14T09:49:13-08:00</updated>
    <id>http://lifuzu.com/blog/2015/01/14/design-a-reuse-and-de-use-modularized-software-system</id>
    <content type="html"><![CDATA[<p><img src="http://www.edmentum.com/sites/edmentum.com/files/solutions/content/building_0.jpg" alt="enter image description here" /></p>

<h2>Design a reuse and &lsquo;de-use&rsquo; modularized software system</h2>

<p><strong>Keywords</strong>: reuse, &lsquo;de-use&rsquo;, minimum equipped interface (MEI), strong cohesion, loose coupling, software engineering</p>

<p>Most of the task on software design are to analyze requirements, decompose functionalities and connect the parts of artifacts to fulfill customer requirements.</p>

<p>This time we focus on decomposition of functionalities. Why we need to decompose the requirements to each small module or package, one of the reasons is to reuse them, another reason, I think, is to &lsquo;de-use&rsquo; them. When we do not need any of modules, we can separate them from system very easily, which also provide much convenience for testing. We can test each of the seperated modules, packages or interfaces isolated, without interference between each other.</p>

<p>The goal of the software design, include architectural design and detail design, is to decompose functionalities with the characteristics of strong cohesive, and loose coupled, which means we need a complete, but most minimal system function set. Interface is a very important element between two systems to access those functionalities, in addition to deployment environment. In fact, we can treat the environment as the interface between system and the system host. So we need a minimum equipped interface (MEI), which refers to Minimum Viable Product (MVP) definition.</p>

<p>To achieve the goal, besides an elegant design blueprint, functional prototyping, we also need supports from configuration management and testing. We should have many different configuration profiles to include or exclude the modules according to the reuse and &lsquo;de-use&rsquo; specifications, which we planned in design. Testing should have different test scenarios to verify and/or validate the interfaces, which are exported by modules or packages according the configuration profiles.</p>

<p>Succeed to DCOM and CORBA, the popular technology so far for designing a strong cohesive and loose coupled interface on cloud is REST, which based on the simple HTTP protocol verbs (GET, PUT, POST, DELETE). REST API is an analogous to SQL for interaction between systems on cloud, the latter provides several common verbs to query and manipulate data with relational database, such as SELECT, INSERT, UPDATE, DELETE, etc.</p>

<p>In a conclusion, as the main task for design, we need to decompose functionalities in order to reuse and &lsquo;de-use&rsquo; modules, which act as a container to host functions. The design goal is to make functionality as most as strong cohesive, and loose coupled. We can leverage configuration management and testing to achieve the design goal. REST interface provides a good practice for designing a strong cohesive, and loose coupled cloud system.</p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setup Mongo Database Master Slave Replication]]></title>
    <link href="http://lifuzu.com/blog/2015/01/07/setup-mongo-database-master-slave-replication/"/>
    <updated>2015-01-07T13:58:40-08:00</updated>
    <id>http://lifuzu.com/blog/2015/01/07/setup-mongo-database-master-slave-replication</id>
    <content type="html"><![CDATA[<p><img src="http://tapainc.com/images/MongoDB.png" alt="enter image description here" /></p>

<p><strong>Prerequisites</strong>:</p>

<p>You need know the IP or hostname of the Mongo database which should be acted as a master, and you can ping the port 27017 from the mongo database which should be acted as a slave.</p>

<p>Here are some commands might be helpful:</p>

<ul>
<li>To know the external IP of the server:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ curl http://checkip.dyndns.org/</span></code></pre></td></tr></table></div></figure>


<ul>
<li>To ping the server which you want to connect, on the specific port ( for example: 27017 ):</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ telnet 1.2.3.4 27017</span></code></pre></td></tr></table></div></figure>


<p><strong>Practices</strong>:</p>

<p>Machine A (Master):
Run Mongo Daemon as master:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mongod --master
</span></code></pre></td></tr></table></div></figure>


<p>Machine B (Slave):
If mongod is running, which is the default behavior when installed, you should stop it before the following steps:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Stop the mongodb which installed by default</span>
</span><span class='line'><span class="nv">$ </span>sudo stop mongodb
</span></code></pre></td></tr></table></div></figure>


<p>Run Mongo Daemon as slave:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mongod --slave
</span></code></pre></td></tr></table></div></figure>


<p>Probably you need to specify the dbpath, in case you have any disk space limitation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo mongod --slave --dbpath /data/mongodb/
</span></code></pre></td></tr></table></div></figure>


<p>Run <code>mongo</code> to open a mongo shell, then config for replication:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; use <span class="nb">local</span>
</span><span class='line'>&gt; db.sources.find<span class="o">()</span>
</span><span class='line'>&gt; db.sources.insert<span class="o">(</span> <span class="o">{</span> host: &lt;masterhostname&gt; &lt;,only: databasename&gt; <span class="o">}</span> <span class="o">)</span>;
</span></code></pre></td></tr></table></div></figure>


<p>Then you run <code>show dbs</code> in the mongo shell:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; show dbs
</span></code></pre></td></tr></table></div></figure>


<p>You will find the databasename which we typed behind the <code>only</code> key above displayed.</p>

<p>You may need to run the command multiple times to make sure the replication is going on. For example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; show dbs
</span><span class='line'>databasename    17.9453125GB
</span><span class='line'><span class="nb">local   </span>0.078125GB
</span><span class='line'>&gt; show dbs
</span><span class='line'>databasename    19.9443359375GB
</span></code></pre></td></tr></table></div></figure>


<p>You can also run the following commands to show the information of the replication on master and slave side:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Master side:</span>
</span><span class='line'>&gt; rs.printReplicationInfo<span class="o">()</span> <span class="c"># replace &#39;rs&#39; to &#39;db&#39; for the version prior to 2.6</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Slave side:</span>
</span><span class='line'>&gt; rs.printSlaveReplicationInfo<span class="o">()</span> <span class="c"># same thing as the above command, you need to replace &#39;rs&#39; to &#39;db&#39; if you run the mongodb which version prior to 2.6</span>
</span></code></pre></td></tr></table></div></figure>


<p>Besides, you can run the following command to get a defail status of the server:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; db.serverStatus<span class="o">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>You might neet to run resync to recover replication:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; use admin
</span><span class='line'>&gt; db.runCommand<span class="o">(</span> <span class="o">{</span> resync: 1 <span class="o">}</span> <span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>References</strong>:</p>

<ol>
<li><a href="http://docs.mongodb.org/manual/core/master-slave/">http://docs.mongodb.org/manual/core/master-slave/</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install Gollum]]></title>
    <link href="http://lifuzu.com/blog/2014/08/22/install-gollum/"/>
    <updated>2014-08-22T11:57:46-07:00</updated>
    <id>http://lifuzu.com/blog/2014/08/22/install-gollum</id>
    <content type="html"><![CDATA[<p><img src="https://lh4.googleusercontent.com/-DUpioC7fb_I/U_eSdHggv1I/AAAAAAAACYU/4VJAsLqqCSE/s600/Screen+Shot+2014-08-22+at+11.56.27+AM.png" title="Screen Shot 2014-08-22 at 11.56.27 AM.png" alt="gollum snapshot" /></p>

<p>Gollum is a simple wiki system built on top of Git.</p>

<p>Gollum wikis are simply Git repositories that adhere to a specific format. Gollum pages may be written in a variety of formats and can be edited in a number of ways depending on your needs. You can edit your wiki locally:</p>

<ul>
<li>With your favorite text editor or IDE (changes will be visible after committing).</li>
<li>With the built-in web interface.</li>
<li>With the Gollum Ruby API.</li>
</ul>


<p>Here are steps to install gollum.</p>

<!-- more -->


<h3>Install some dependencies:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install libicu-dev</span></code></pre></td></tr></table></div></figure>


<h3>Install Gollum with RubyGems:</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install gollum</span></code></pre></td></tr></table></div></figure>


<h3>Install some text format</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install redcarpet
</span><span class='line'>gem install github-markdown</span></code></pre></td></tr></table></div></figure>


<h3>Create a local git repo on host</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir repos/gollum
</span><span class='line'>cd repos/gollum
</span><span class='line'>git init .</span></code></pre></td></tr></table></div></figure>


<h3>Run the gollum</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gollum</span></code></pre></td></tr></table></div></figure>


<p>This will start up a web server running the Gollum frontend and you can view and edit your wiki at <a href="http://">http://</a><code>&lt;host&gt;</code>:4567.</p>

<h3>BUILDING THE GEM FROM MASTER</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem uninstall -aIx gollum
</span><span class='line'>$ git clone https://github.com/gollum/gollum.git
</span><span class='line'>$ cd gollum
</span><span class='line'>gollum$ rake build
</span><span class='line'>gollum$ gem install --no-ri --no-rdoc pkg/gollum*.gem</span></code></pre></td></tr></table></div></figure>


<h3>RUN THE TESTS</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ bundle install
</span><span class='line'>$ bundle exec rake test</span></code></pre></td></tr></table></div></figure>


<h3>RUNNING WITH UPSTART</h3>

<p>Create a wrapper to include environment information:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rvm alias create mygollum ruby-2.1.2@mygollum
</span><span class='line'>$ rvm alias list
</span><span class='line'># $HOME/.rvm/wrappers/mygollum/gollum</span></code></pre></td></tr></table></div></figure>


<p>Create a config file under /etc/init, name it <code>gollum.cong</code>, as:
<a href="https://gist.github.com/lifuzu/31af0dc859bf9bfb6da5">https://gist.github.com/lifuzu/31af0dc859bf9bfb6da5</a>
Start/Stop the service:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># sudo start gollum
</span><span class='line'>$ sudo stop gollum</span></code></pre></td></tr></table></div></figure>


<p>You can get the log file at /var/log/upstart/gollum.log to analyze:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo vi /var/log/upstart/gollum.log </span></code></pre></td></tr></table></div></figure>


<h3>RUNNING WITH NGINX</h3>

<p>Create a subdomain like &lsquo;gollum.weimed.com&rsquo; point to your server IP;
Create a nginx configuration file, as /etc/nginx/sites-available/stackedit.weimed.com:
<a href="https://gist.github.com/lifuzu/2f2ce9095ba4a6969b2c">https://gist.github.com/lifuzu/2f2ce9095ba4a6969b2c</a>
Create a symbolic link to enable it</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo ln -s /etc/nginx/sites-available/gollum.weimed.com /etc/nginx/sites-enabled/gollum.weimed.com</span></code></pre></td></tr></table></div></figure>


<p>Check the configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo nginx -t
</span><span class='line'>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span><span class='line'>nginx: configuration file /etc/nginx/nginx.conf test is successful</span></code></pre></td></tr></table></div></figure>


<p>Reload the configuration:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo service nginx reload</span></code></pre></td></tr></table></div></figure>


<p>You should see: <a href="http://gollum.weimed.com/">http://gollum.weimed.com/</a></p>

<h3>AUTH</h3>

<p>TODO, please refer to [5], [6]</p>

<h3>References:</h3>

<ol>
<li><a href="https://github.com/gollum/gollum">https://github.com/gollum/gollum</a></li>
<li><a href="https://gist.github.com/leon/2643936">https://gist.github.com/leon/2643936</a></li>
<li><a href="http://rvm.io/integration/init-d">http://rvm.io/integration/init-d</a></li>
<li><a href="https://github.com/rvm/rvm-site-setup/blob/master/conf/smfbot.conf">https://github.com/rvm/rvm-site-setup/blob/master/conf/smfbot.conf</a></li>
<li><a href="http://www.mfoot.com/blog/2013/05/19/setting-up-a-personal-wiki-with-aws-and-gollum/">http://www.mfoot.com/blog/2013/05/19/setting-up-a-personal-wiki-with-aws-and-gollum/</a></li>
<li><a href="https://github.com/roman/rack-auth">https://github.com/roman/rack-auth</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install Nodejs Using NVM]]></title>
    <link href="http://lifuzu.com/blog/2014/08/20/install-nodejs-using-nvm/"/>
    <updated>2014-08-20T11:44:12-07:00</updated>
    <id>http://lifuzu.com/blog/2014/08/20/install-nodejs-using-nvm</id>
    <content type="html"><![CDATA[<p><img src="https://lh3.googleusercontent.com/-1_vzgrh5dnI/U_Tq8koEceI/AAAAAAAACYA/S8xhWfrGSoE/s600/Screen+Shot+2014-08-20+at+11.36.59+AM.png" title="Screen Shot 2014-08-20 at 11.36.59 AM.png" alt="enter image description here" /></p>

<p>An alternative to installing Node.js through apt is to use a specially designed tool called nvm, which stands for &ldquo;Node.js version manager&rdquo;.</p>

<p>Using nvm, you can install multiple, self-contained versions of Node.js which will allow you to control your environment easier. It will give you on-demand access to the newest versions of Node.js, but will also allow you to target previous releases that your app may depend on.</p>

<!-- more -->


<h3>Install prerequisite package</h3>

<p>To start off, we&rsquo;ll need to get the software packages from our Ubuntu repositories that will allow us to build source packages. The nvm script will leverage these tools to build the necessary components:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install build-essential libssl-dev</span></code></pre></td></tr></table></div></figure>


<h3>Install nvm</h3>

<p>Once the prerequisite packages are installed, you can pull down the nvm installation script from the project&rsquo;s GitHub page. The version number may be different, but in general, you can download and install it with the following syntax:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl https://raw.githubusercontent.com/creationix/nvm/v0.13.1/install.sh | bash</span></code></pre></td></tr></table></div></figure>


<p>This will download the script and run it. It will install the software into a subdirectory of your home directory at ~/.nvm. It will also add the necessary lines to your ~/.profile file to use the file.</p>

<p>To gain access to the nvm functionality, you&rsquo;ll need to log out and log back in again, or you can source the ~/.profile file so that your current session knows about the changes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>source ~/.profile</span></code></pre></td></tr></table></div></figure>


<p>Now that you have nvm installed, you can install isolated Node.js versions.</p>

<h3>Install nodejs</h3>

<p>To find out the versions of Node.js that are available for installation, you can type:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nvm ls-remote
</span><span class='line'>. . .
</span><span class='line'> v0.11.6
</span><span class='line'> v0.11.7
</span><span class='line'> v0.11.8
</span><span class='line'> v0.11.9
</span><span class='line'>v0.11.10
</span><span class='line'>v0.11.11
</span><span class='line'>v0.11.12
</span><span class='line'>v0.11.13</span></code></pre></td></tr></table></div></figure>


<p>As you can see, the newest version at the time of this writing is v0.11.13. You can install that by typing:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nvm install 0.11.13</span></code></pre></td></tr></table></div></figure>


<p>Usually, nvm will switch to use the most recently installed version. You can explicitly tell nvm to use the version we just downloaded by typing:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nvm use 0.11.13</span></code></pre></td></tr></table></div></figure>


<p>When you install Node.js using nvm, the executable is called node. You can see the version currently being used by the shell by typing:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ node -v
</span><span class='line'>v.0.11.13
</span><span class='line'>$ npm -v
</span><span class='line'>1.4.9</span></code></pre></td></tr></table></div></figure>


<p>If you have multiple Node.js versions, you can see what is installed by typing:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ nvm ls
</span><span class='line'>-&gt;  v0.11.13
</span><span class='line'>      system</span></code></pre></td></tr></table></div></figure>


<p>If you wish to default one of the versions, you can type:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ nvm alias default 0.11.13</span></code></pre></td></tr></table></div></figure>


<p>This version will be automatically selected when a new session spawns. You can also reference it by the alias like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ nvm use default</span></code></pre></td></tr></table></div></figure>


<p>Each version of Node.js will keep track of its own packages and has npm available to manage these.</p>

<h3>Install nodejs packages with npm</h3>

<p>You can have npm install packages to the Node.js project&rsquo;s ./node_modules directory by using the normal format:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ npm install express</span></code></pre></td></tr></table></div></figure>


<p>If you&rsquo;d like to install it globally (available to the other projects using the same Node.js version), you can add the -g flag:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ npm install -g express</span></code></pre></td></tr></table></div></figure>


<p>This will install the package in:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>~/.nvm/node_version/lib/node_modules/package_name</span></code></pre></td></tr></table></div></figure>


<p>Installing globally will let you run the commands from the command line, but you&rsquo;ll have to use link the package into your local sphere to require it from within a program:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm link express</span></code></pre></td></tr></table></div></figure>


<p>You can learn more about the options available to you with nvm by typing:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>nvm help</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>

<h3>Reference:</h3>

<ol>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-an-ubuntu-14-04-server">https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-an-ubuntu-14-04-server</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ Apple iOS ]]></title>
    <link href="http://lifuzu.com/blog/2014/08/17/join-apple-ios-program/"/>
    <updated>2014-08-17T10:05:48-07:00</updated>
    <id>http://lifuzu.com/blog/2014/08/17/join-apple-ios-program</id>
    <content type="html"><![CDATA[<h1></h1>

<p> iOS  Apple  iOS  iOS  Apple  iOS </p>

<h3> Apple </h3>

<p> Apple </p>

<p><a href="http://developer.apple.com/programs/register/">http://developer.apple.com/programs/register/</a></p>

<p>
 Apple ID  Apple ID  iTunes  Apple Store 
 iOS SDK Xcode IDE</p>

<!-- more -->


<h3> Xcode 6 (Beta) IDE  iOS 8 SDK</h3>

<p> iOS SDK  Xcode  Apple App Store  Swift  Xcode
6  Beta </p>

<p><a href="https://developer.apple.com/xcode/downloads/">https://developer.apple.com/xcode/downloads/</a></p>

<p> iOS  Apple  iOS </p>

<h3>iOS </h3>

<p> iOS 99iOS  iOS SDK  Xcode iOS </p>

<ol>
<li><p>iOS  Xcode iCloud </p></li>
<li><p>iOS  iOS SDK  iOS </p></li>
<li><p>iOS App Store </p></li>
</ol>


<p> App Store iOS</p>

<h3> iOS </h3>

<p>iOS  iOS  Apple iOS 
</p>

<h3> iOS </h3>

<p> iOS  iOS  iOS </p>

<p><a href="https://developer.apple.com/programs/ios/">https://developer.apple.com/programs/ios/</a></p>

<p><img src="https://lh4.googleusercontent.com/-B_5q_23G9eo/U-ccIbGr89I/AAAAAAAACVE/dLyAUC2dJGs/s600/Screen+Shot+2014-08-09+at+11.58.29+PM.png" title="Screen Shot 2014-08-09 at 11.58.29 PM.png" alt="enter image description here" /></p>

<p>Enroll Now
<img src="https://lh5.googleusercontent.com/-qEoXluyTXdk/U-ccuPCliyI/AAAAAAAACVQ/o2zVICVQLTI/s600/Screen+Shot+2014-08-09+at+11.58.35+PM.png" title="Screen Shot 2014-08-09 at 11.58.35 PM.png" alt="enter image description here" /></p>

<p>Continue
<img src="https://lh5.googleusercontent.com/-gqQyEfGBRrY/U-cdG8Te43I/AAAAAAAACVg/sKKoDloLZbE/s600/Screen+Shot+2014-08-10+at+12.00.51+AM.png" title="Screen Shot 2014-08-10 at 12.00.51 AM.png" alt="enter image description here" /></p>

<p> Apple ID Continue
<img src="https://lh4.googleusercontent.com/-4BqH51hVbOo/U-cd-8GVBLI/AAAAAAAACV0/w5FhDRnCFXE/s600/Screen+Shot+2014-08-10+at+12.06.14+AM.png" title="Screen Shot 2014-08-10 at 12.06.14 AM.png" alt="enter image description here" /></p>

<p>
<img src="https://lh4.googleusercontent.com/-Pic2Qq9Hj3E/U-hl0oX9c6I/AAAAAAAACWs/PHmdeRviXoA/s600/Screen+Shot+2014-08-10+at+12.35.48+AM.png" title="Screen Shot 2014-08-10 at 12.35.48 AM.png" alt="enter image description here" /></p>

<p></p>

<p></p>

<p></p>

<p><a href="http://developer.apple.com/membercenter">http://developer.apple.com/membercenter</a></p>

<p>Your AccountEnrollment Pending
<img src="https://lh4.googleusercontent.com/--zjVcNRCKCM/U-hmxO7TivI/AAAAAAAACXE/HwSXSe2ATOA/s600/Screen+Shot+2014-08-10+at+11.45.23+PM.png" title="Screen Shot 2014-08-10 at 11.45.23 PM.png" alt="enter image description here" /></p>

<p></p>

<p><img src="https://lh6.googleusercontent.com/-EpxJlJRDOU4/U-6dsYX-ccI/AAAAAAAACXk/_m28-ERYSeY/s600/Screen+Shot+2014-08-15+at+4.53.34+PM.png" title="Screen Shot 2014-08-15 at 4.53.34 PM.png" alt="register iOS program done" /></p>

<h3></h3>

<p> iOS  Apple  iOS </p>

<p> iOS SDK Xcode 6Beta</p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Playing With Gerrit Jira Plugin]]></title>
    <link href="http://lifuzu.com/blog/2014/08/05/playing-with-gerrit-jira-plugin/"/>
    <updated>2014-08-05T11:05:16-07:00</updated>
    <id>http://lifuzu.com/blog/2014/08/05/playing-with-gerrit-jira-plugin</id>
    <content type="html"><![CDATA[<p><img src="https://lh5.googleusercontent.com/dDJ6IKUAZN5IZMlt8CmQic457z5BKfJ4WdqXrH2sf5s=s650" title="Gerrit" alt="Gerrit" /></p>

<h3>Build and Setup</h3>

<p><strong>1</strong>. Clone the Gerrit source:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone https://gerrit.googlesource.com/gerrit
</span></code></pre></td></tr></table></div></figure>


<p><strong>2</strong>. Checkout to version 2.8 (2.8 is the latest stable version), include to update submodules:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>gerrit
</span><span class='line'><span class="nv">$ </span>git checkout -b stable-2.8 stable-2.8
</span><span class='line'><span class="nv">$ </span>git submodule update --init --rebase <span class="c"># commands, please referece to git submodule</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>3</strong>. Clone buck, buck is the build system for the latest Gerrit, then build it with ant (&lsquo;sudo apt-get install ant&rsquo;):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone https://gerrit.googlesource.com/buck
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>buck
</span><span class='line'><span class="nv">$ </span>ant
</span></code></pre></td></tr></table></div></figure>


<p><strong>4</strong>. Install buck to be accessed globally:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mkdir ~/bin
</span><span class='line'><span class="nv">$ </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>~/bin:<span class="nv">$PATH</span>
</span><span class='line'><span class="nv">$ </span>ln -s <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/bin/buck ~/bin/
</span><span class='line'><span class="nv">$ </span>ln -s <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/bin/buckd ~/bin/
</span><span class='line'><span class="nv">$ </span>which buck
</span></code></pre></td></tr></table></div></figure>


<p><strong>5</strong>. Build Gerrit:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>gerrit
</span><span class='line'><span class="nv">$ </span>buck build gerrit
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><strong>NOTE:</strong> The gerrit.war will be generated here: buck-out/gen/gerrit.war</p></blockquote>

<p><strong>6</strong>. Build extension, plugin, GWT API jar files, and install them:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>buck build api
</span><span class='line'><span class="nv">$ </span>buck build api_install
</span></code></pre></td></tr></table></div></figure>


<p><strong>7</strong>. Build all core plugins (optional):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>buck build plugins:core
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><strong>NOTE:</strong> All core plugins will be generated here: buck-out/gen/plugins/&lt;name&gt;/&lt;name&gt;.jar</p></blockquote>

<p><strong>8</strong>. Clone the hooks-its, and hooks-jira projects:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone https://gerrit.googlesource.com/plugins/hooks-its plugins/hooks-its
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>plugins/hooks-its
</span><span class='line'><span class="nv">$ </span>git checkout -b v2.8 origin/stable-2.8
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> ../..
</span><span class='line'><span class="nv">$ </span>git clone https://gerrit.googlesource.com/plugins/hooks-jira plugins/hooks-jira
</span></code></pre></td></tr></table></div></figure>


<p><strong>9</strong>. Modify the pom.xml files under plugins/hooks-its AND plugins/hooks-its/hooks-its:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd </span>plugins/hooks-its
</span><span class='line'><span class="nv">$ </span>git diff
</span><span class='line'>diff --git a/hooks-its/pom.xml b/hooks-its/pom.xml
</span><span class='line'>index a206459..75e11dc 100644
</span><span class='line'>--- a/hooks-its/pom.xml
</span><span class='line'>+++ b/hooks-its/pom.xml
</span><span class='line'>@@ -22,7 +22,7 @@ limitations under the License.
</span><span class='line'>   &lt;parent&gt;
</span><span class='line'>     &lt;groupId&gt;com.googlesource.gerrit.plugins.its&lt;/groupId&gt;
</span><span class='line'>     &lt;artifactId&gt;hooks-its-parent&lt;/artifactId&gt;
</span><span class='line'>-    &lt;version&gt;2.9-SNAPSHOT&lt;/version&gt;
</span><span class='line'>+    &lt;version&gt;2.8&lt;/version&gt;
</span><span class='line'>   &lt;/parent&gt;
</span><span class='line'>   &lt;artifactId&gt;hooks-its&lt;/artifactId&gt;
</span><span class='line'>   &lt;name&gt;Gerrit Code Review - Commit validation and Workflow&lt;/name&gt;
</span><span class='line'>diff --git a/pom.xml b/pom.xml
</span><span class='line'>index 600bff9..995d008 100644
</span><span class='line'>--- a/pom.xml
</span><span class='line'>+++ b/pom.xml
</span><span class='line'>@@ -22,7 +22,7 @@ limitations under the License.
</span><span class='line'>   &lt;groupId&gt;com.googlesource.gerrit.plugins.its&lt;/groupId&gt;
</span><span class='line'>   &lt;artifactId&gt;hooks-its-parent&lt;/artifactId&gt;
</span><span class='line'>   &lt;packaging&gt;pom&lt;/packaging&gt;
</span><span class='line'>-  &lt;version&gt;2.9-SNAPSHOT&lt;/version&gt;
</span><span class='line'>+  &lt;version&gt;2.8&lt;/version&gt;
</span><span class='line'>
</span><span class='line'>   &lt;name&gt;Gerrit Code Review - Issue tracker support&lt;/name&gt;
</span></code></pre></td></tr></table></div></figure>


<p><strong>10</strong>. Build the hooks-its:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>plugins/hooks-its
</span><span class='line'><span class="nv">$ </span>mvn -DskipTests -Dmaven.test.skip<span class="o">=</span><span class="nb">true </span>package install
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><strong>NOTE:</strong> The hooks-its-2.8.jar will be generated here: hooks-its/target/hooks-its-2.8.jar
<strong>NOTE</strong>: If don&rsquo;t skip tests, run with the command: <code>mvn clean package install</code>, then will fail on test case!
<strong>NOTE</strong>: Gerrit select BUCK as its new build system, for new plugin, please reference to the following <em>NOTES</em> #5</p></blockquote>

<p><strong>11</strong>. Modify the pom.xml files under plugins/hooks-jira:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>plugins/hooks-jira
</span><span class='line'><span class="nv">$ </span>git diff
</span><span class='line'>diff --git a/pom.xml b/pom.xml
</span><span class='line'>index 7b04c60..8f60c78 100644
</span><span class='line'>--- a/pom.xml
</span><span class='line'>+++ b/pom.xml
</span><span class='line'>@@ -20,7 +20,7 @@ limitations under the License.
</span><span class='line'>   &lt;parent&gt;
</span><span class='line'>     &lt;groupId&gt;com.googlesource.gerrit.plugins.its&lt;/groupId&gt;
</span><span class='line'>     &lt;artifactId&gt;hooks-its-parent&lt;/artifactId&gt;
</span><span class='line'>-    &lt;version&gt;2.9-SNAPSHOT&lt;/version&gt;
</span><span class='line'>+    &lt;version&gt;2.8&lt;/version&gt;
</span><span class='line'>   &lt;/parent&gt;
</span><span class='line'>   &lt;artifactId&gt;hooks-jira&lt;/artifactId&gt;
</span><span class='line'>   &lt;packaging&gt;jar&lt;/packaging&gt;
</span></code></pre></td></tr></table></div></figure>


<p><strong>12</strong>. Build the hooks-jira:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>plugins/hooks-jira
</span><span class='line'><span class="nv">$ </span>mvn clean package
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><strong>NOTE:</strong> The hooks-jira-2.8.jar will be generated here: target/hooks-jira-2.8.jar</p></blockquote>

<p><strong>13</strong>. Copy the following jar files to the <code>plugin</code> folder under the Gerrit installation path on remote server:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>hooks-its-2.8.jar
</span><span class='line'>hooks-jira-2.8.jar
</span></code></pre></td></tr></table></div></figure>


<p>For example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>scp hooks-its/target/hooks-its-2.8.jar ../hooks-jira/target/hooks-jira-2.8.jar gerrit2@review.example.co:/home/gerrit2/review_site/plugins
</span></code></pre></td></tr></table></div></figure>


<p><strong>14</strong>. Add a new file etc/its/action.config under the Gerrit installation path on remote server:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>rule <span class="s2">&quot;merged&quot;</span><span class="o">]</span>
</span><span class='line'>        event-type <span class="o">=</span> change-merged
</span><span class='line'>        <span class="nv">action</span> <span class="o">=</span> add-standard-comment
</span><span class='line'><span class="o">[</span>rule <span class="s2">&quot;comment&quot;</span><span class="o">]</span>
</span><span class='line'>        event-type <span class="o">=</span> comment-added
</span><span class='line'>        <span class="nv">action</span> <span class="o">=</span> add-standard-comment
</span><span class='line'><span class="o">[</span>rule <span class="s2">&quot;patch-set&quot;</span><span class="o">]</span>
</span><span class='line'>        event-type <span class="o">=</span> patchset-created
</span><span class='line'>        <span class="nv">action</span> <span class="o">=</span> add-standard-comment
</span><span class='line'><span class="o">[</span>rule <span class="s2">&quot;ref-updated&quot;</span><span class="o">]</span>
</span><span class='line'>        event-type <span class="o">=</span> ref-updated
</span><span class='line'>        <span class="nv">action</span> <span class="o">=</span> add-standard-comment
</span></code></pre></td></tr></table></div></figure>


<p><strong>15</strong>. Run the Gerrit initial installation command on remote server:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>java -jar gerrit-2.8.war init -d review_site
</span><span class='line'>
</span><span class='line'>*** Gerrit Code Review 2.8
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>*** Git Repositories
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Location of Git repositories   <span class="o">[</span>git<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>*** SQL Database
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Database server <span class="nb">type</span>           <span class="o">[</span>mysql<span class="o">]</span>:
</span><span class='line'>Server hostname                <span class="o">[</span>localhost<span class="o">]</span>:
</span><span class='line'>Server port                    <span class="o">[(</span>mysql default<span class="o">)]</span>:
</span><span class='line'>Database name                  <span class="o">[</span>reviewdb<span class="o">]</span>:
</span><span class='line'>Database username              <span class="o">[</span>gerrit2<span class="o">]</span>:
</span><span class='line'>Change gerrit2<span class="s1">&#39;s password      [y/N]?</span>
</span><span class='line'>
</span><span class='line'><span class="s1">*** User Authentication</span>
</span><span class='line'><span class="s1">***</span>
</span><span class='line'>
</span><span class='line'><span class="s1">Authentication method          [DEVELOPMENT_BECOME_ANY_ACCOUNT/?]:</span>
</span><span class='line'>
</span><span class='line'><span class="s1">*** Email Delivery</span>
</span><span class='line'><span class="s1">***</span>
</span><span class='line'>
</span><span class='line'><span class="s1">SMTP server hostname           [localhost]:</span>
</span><span class='line'><span class="s1">SMTP server port               [(default)]:</span>
</span><span class='line'><span class="s1">SMTP encryption                [NONE/?]:</span>
</span><span class='line'><span class="s1">SMTP username                  [gerrit2]:</span>
</span><span class='line'><span class="s1">Change gerrit2&#39;</span>s password      <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>
</span><span class='line'>*** Container Process
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Run as                         <span class="o">[</span>gerrit2<span class="o">]</span>:
</span><span class='line'>Java runtime                   <span class="o">[</span>C:<span class="se">\P</span>rogram Files <span class="o">(</span>x86<span class="o">)</span><span class="se">\J</span>ava<span class="se">\j</span>re7<span class="o">]</span>:
</span><span class='line'>Upgrade c:<span class="se">\U</span>sers<span class="se">\g</span>errit2<span class="se">\g</span>errit<span class="se">\b</span>in<span class="se">\g</span>errit.war <span class="o">[</span>Y/n<span class="o">]</span>?
</span><span class='line'>Copying gerrit-2.8.war to c:<span class="se">\U</span>sers<span class="se">\g</span>errit2<span class="se">\g</span>errit<span class="se">\b</span>in<span class="se">\g</span>errit.war
</span><span class='line'>
</span><span class='line'>*** SSH Daemon
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Listen on address              <span class="o">[</span>*<span class="o">]</span>:
</span><span class='line'>Listen on port                 <span class="o">[</span>29418<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>*** HTTP Daemon
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Behind reverse proxy           <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>Use SSL <span class="o">(</span>https://<span class="o">)</span>             <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>Listen on address              <span class="o">[</span>*<span class="o">]</span>:
</span><span class='line'>Listen on port                 <span class="o">[</span>8080<span class="o">]</span>:
</span><span class='line'>Canonical URL                  <span class="o">[</span>http://review.example.com:8080/<span class="o">]</span>:
</span><span class='line'>
</span><span class='line'>*** Plugins
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Install plugin reviewnotes version v2.8 <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>Install plugin download-commands version v2.8 <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>Install plugin replication version v2.8 <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>Install plugin commit-message-length-validator version v2.8 <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>*** Jira connectivity
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Jira URL <span class="o">(</span>empty to skip<span class="o">)</span>       <span class="o">[</span>https://jira.example.com/<span class="o">]</span>:
</span><span class='line'>Jira username                  <span class="o">[</span>jira-robot<span class="o">]</span>:
</span><span class='line'>Change jira-robot<span class="err">&#39;</span>s password        <span class="o">[</span>y/N<span class="o">]</span>?
</span><span class='line'>Test connectivity to https://jira.example.com <span class="o">[</span>y/N<span class="o">]</span>? y
</span><span class='line'>Checking Jira connectivity ... <span class="o">[</span>OK<span class="o">]</span>
</span><span class='line'>
</span><span class='line'>*** Jira issue-tracking association
</span><span class='line'>***
</span><span class='line'>
</span><span class='line'>Jira issue-Id regex            <span class="o">[([</span>A-Z<span class="o">]</span>+-<span class="o">[</span>0-9<span class="o">]</span>+<span class="o">)]</span>:
</span><span class='line'>Issue-id enforced in commit message <span class="o">[</span>MANDATORY/?<span class="o">]</span>:?
</span><span class='line'>Supported options are:
</span><span class='line'>           mandatory
</span><span class='line'>           suggested
</span><span class='line'>           optional
</span><span class='line'>Issue-id enforced in commit message <span class="o">[</span>MANDATORY/?<span class="o">]</span>: suggested
</span><span class='line'>Initialized C:<span class="se">\U</span>sers<span class="se">\g</span>errit2<span class="se">\g</span>errit
</span></code></pre></td></tr></table></div></figure>


<p><strong>16</strong>. Restart gerrit-jetty service:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo service gerrit-jetty.sh restart
</span></code></pre></td></tr></table></div></figure>


<p><strong>17</strong>. Done!</p>

<h3>NOTES:</h3>

<p><em>1</em>. Download Gerrit here: <a href="http://gerrit-releases.storage.googleapis.com/index.html">http://gerrit-releases.storage.googleapis.com/index.html</a></p>

<p><em>2</em>. The file review_site/etc/gerrit.config should look like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>jira<span class="o">]</span>
</span><span class='line'>        <span class="nv">url</span> <span class="o">=</span> http://review.example.com:8080
</span><span class='line'>        <span class="nv">username</span> <span class="o">=</span> jira-robot
</span><span class='line'>        <span class="nv">commentOnRefUpdatedGitWeb</span> <span class="o">=</span> <span class="nb">false</span>   <span class="c"># to comment gitweb comments on jira</span>
</span><span class='line'><span class="o">[</span>commentLink <span class="s2">&quot;jira&quot;</span><span class="o">]</span>
</span><span class='line'>        <span class="nv">match</span> <span class="o">=</span> <span class="o">([</span>A-Z<span class="o">]</span>+-<span class="o">[</span>0-9<span class="o">]</span>+<span class="o">)</span>
</span><span class='line'>        <span class="nv">html</span> <span class="o">=</span> &lt;a <span class="nv">href</span><span class="o">=</span><span class="se">\&quot;</span>http://jira.example.com:8080/browse/<span class="nv">$1</span><span class="se">\&quot;</span>&gt;<span class="nv">$1</span>&lt;/a&gt;
</span><span class='line'>        <span class="nv">association</span> <span class="o">=</span> SUGGESTED
</span></code></pre></td></tr></table></div></figure>


<p><em>3</em>. If we just want to parse the jira id on the subject of the git comments, then here is the diff:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>diff --git a/hooks-its/src/main/java/com/googlesource/gerrit/plugins/hooks/util/
</span><span class='line'>index a04b175..3d56426 100644
</span><span class='line'>--- a/hooks-its/src/main/java/com/googlesource/gerrit/plugins/hooks/util/CommitM
</span><span class='line'>+++ b/hooks-its/src/main/java/com/googlesource/gerrit/plugins/hooks/util/CommitM
</span><span class='line'>@@ -31,7 +31,7 @@ public class CommitMessageFetcher <span class="o">{</span>
</span><span class='line'>       RevWalk <span class="nv">revWalk</span> <span class="o">=</span> new RevWalk<span class="o">(</span>repo<span class="o">)</span>;
</span><span class='line'>       RevCommit <span class="nv">commit</span> <span class="o">=</span> revWalk.parseCommit<span class="o">(</span>ObjectId.fromString<span class="o">(</span>commitId<span class="o">))</span>;
</span><span class='line'>
</span><span class='line'>-      <span class="k">return </span>commit.getFullMessage<span class="o">()</span>;
</span><span class='line'>+      <span class="k">return </span>commit.getShortMessage<span class="o">()</span>;
</span><span class='line'>     <span class="o">}</span> finally <span class="o">{</span>
</span><span class='line'>       repo.close<span class="o">()</span>;
</span><span class='line'>     <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>4</em>. Get the log message from jetty/logs on Gerrit server.
<em>5</em>. Gerrit choose BUCK as its new build system, so for the new plugin, the build steps should be (take cookbook-plugin as an example):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>buck build plugins/cookbook-plugin
</span></code></pre></td></tr></table></div></figure>


<p>The output is created in: buck-out/gen/plugins/cookbook-plugin/cookbook-plugin.jar</p>

<h3>References:</h3>

<p><em>1</em>. <a href="https://groups.google.com/forum/#!msg/repo-discuss/GSyHMeaCyyw/cJGunFcNc4oJ">https://groups.google.com/forum/#!msg/repo-discuss/GSyHMeaCyyw/cJGunFcNc4oJ</a>
<em>2</em>. <a href="https://gerrit-review.googlesource.com/Documentation/dev-buck.html">https://gerrit-review.googlesource.com/Documentation/dev-buck.html</a></p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Playing With Jenkins Create Job]]></title>
    <link href="http://lifuzu.com/blog/2014/04/24/playing-with-jenkins-create-job/"/>
    <updated>2014-04-24T22:08:09-07:00</updated>
    <id>http://lifuzu.com/blog/2014/04/24/playing-with-jenkins-create-job</id>
    <content type="html"><![CDATA[<p><img src="https://lh4.googleusercontent.com/-iwPM2DPUvJY/U0Y1mjJ70WI/AAAAAAAAB4g/ZOmWzMCL-_0/s0/jenkins_feature.jpg" title="jenkins_feature.jpg" alt="Jenkins logo" /></p>

<h2>create new job from templates</h2>

<p>In this article, we will talk about how to create a Jenkins job with a template by some commands.</p>

<h3>Instructions</h3>

<p><em>1</em>. Get the Jenkins CLI client package</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ wget http://jenkins/jnlpJars/jenkins-cli.jar</span></code></pre></td></tr></table></div></figure>


<p><em>2</em>. Check which commands supported by the client package [Exception <em>1</em>,<em>2</em>]</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ help</span></code></pre></td></tr></table></div></figure>


<p><em>3</em>. List all jobs under the view: tools</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ list-jobs tools</span></code></pre></td></tr></table></div></figure>


<p><em>4</em>. Get the configuration of the job: template</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ get-job template &gt; template.xml</span></code></pre></td></tr></table></div></figure>


<p><em>5</em>. Create a new job based on the configuration</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ create-job new_job_name &lt; new_job_name.xml</span></code></pre></td></tr></table></div></figure>


<p><em>6</em>. Run groovy script</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ groovy scripts/add_job_to_view.groovy</span></code></pre></td></tr></table></div></figure>


<p>If there are any parameters in the script, just as:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>import jenkins.model.*
</span><span class='line'>
</span><span class='line'>if (args.length != 2 ) {
</span><span class='line'>  println "Error on arguments!"
</span><span class='line'>}
</span><span class='line'>def jobName  = args[0] ?: 'a_job'
</span><span class='line'>def viewName = args[1] ?: 'a_view'
</span><span class='line'>
</span><span class='line'>println jobName + ' ' + viewName
</span><span class='line'>
</span><span class='line'>def v = Jenkins.instance.getView(viewName)
</span><span class='line'>def i = Jenkins.instance.getItemByFullName(jobName)
</span><span class='line'>if (v && i) {
</span><span class='line'>  v.add(i)
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>pass the parameters as:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ groovy scripts/add_job_to_view.groovy JOB_NAME VIEM_NAME</span></code></pre></td></tr></table></div></figure>


<p><em>7</em>. Build a job</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ build new_job_name</span></code></pre></td></tr></table></div></figure>


<p><em>8</em>. Diable a job</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins/ disable-job new_job_name</span></code></pre></td></tr></table></div></figure>


<h3>Exceptions:</h3>

<p><em>1</em>. Description:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Exception in thread "main" java.io.IOException: No X-Jenkins-CLI2-Port among [null, Vary, Date, Content-Length, Keep-Alive, Set-Cookie, Connection, Content-Type, X-Powered-By, Server]
</span><span class='line'>  at hudson.cli.CLI.getCliTcpPort(CLI.java:281)
</span><span class='line'>  at hudson.cli.CLI.&lt;init&gt;(CLI.java:128)
</span><span class='line'>  at hudson.cli.CLIConnectionFactory.connect(CLIConnectionFactory.java:72)
</span><span class='line'>  at hudson.cli.CLI._main(CLI.java:449)
</span><span class='line'>  at hudson.cli.CLI.main(CLI.java:378)
</span><span class='line'>  Suppressed: java.io.EOFException: unexpected stream termination
</span><span class='line'>      at hudson.remoting.ClassicCommandTransport.create(ClassicCommandTransport.java:100)
</span><span class='line'>      at hudson.remoting.Channel.&lt;init&gt;(Channel.java:392)
</span><span class='line'>      at hudson.remoting.Channel.&lt;init&gt;(Channel.java:388)
</span><span class='line'>      at hudson.remoting.Channel.&lt;init&gt;(Channel.java:349)
</span><span class='line'>      at hudson.remoting.Channel.&lt;init&gt;(Channel.java:345)
</span><span class='line'>      at hudson.remoting.Channel.&lt;init&gt;(Channel.java:333)
</span><span class='line'>      at hudson.cli.CLI.connectViaHttp(CLI.java:159)
</span><span class='line'>      at hudson.cli.CLI.&lt;init&gt;(CLI.java:132)
</span><span class='line'>      ... 3 more</span></code></pre></td></tr></table></div></figure>


<h4>Solution: check the port which Jenkins is running on, put 8080 on URL should fix, just as:</h4>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ java -jar jenkins-cli.jar -s http://jenkins:8080/ help</span></code></pre></td></tr></table></div></figure>


<p><em>2</em>. Description:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Failed to authenticate with your SSH keys.
</span><span class='line'>hudson.security.AccessDeniedException2: anonymous is missing the ExtendedRead permission
</span><span class='line'>  at hudson.security.ACL.checkPermission(ACL.java:54)
</span><span class='line'>  at hudson.model.AbstractItem.checkPermission(AbstractItem.java:441)
</span><span class='line'>  at hudson.cli.GetJobCommand.run(GetJobCommand.java:46)
</span><span class='line'>  at hudson.cli.CLICommand.main(CLICommand.java:229)
</span><span class='line'>  at hudson.cli.CliManagerImpl.main(CliManagerImpl.java:92)
</span><span class='line'>  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
</span><span class='line'>  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
</span><span class='line'>  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
</span><span class='line'>  at java.lang.reflect.Method.invoke(Method.java:616)
</span><span class='line'>  at hudson.remoting.RemoteInvocationHandler$RPCRequest.perform(RemoteInvocationHandler.java:275)
</span><span class='line'>  at hudson.remoting.RemoteInvocationHandler$RPCRequest.call(RemoteInvocationHandler.java:256)
</span><span class='line'>  at hudson.remoting.RemoteInvocationHandler$RPCRequest.call(RemoteInvocationHandler.java:215)
</span><span class='line'>  at hudson.remoting.UserRequest.perform(UserRequest.java:118)
</span><span class='line'>  at hudson.remoting.UserRequest.perform(UserRequest.java:48)
</span><span class='line'>  at hudson.remoting.Request$2.run(Request.java:326)
</span><span class='line'>  at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
</span><span class='line'>  at hudson.cli.CliManagerImpl$1.call(CliManagerImpl.java:63)
</span><span class='line'>  at hudson.remoting.InterceptingExecutorService$2.call(InterceptingExecutorService.java:95)
</span><span class='line'>  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
</span><span class='line'>  at java.util.concurrent.FutureTask.run(FutureTask.java:166)
</span><span class='line'>  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
</span><span class='line'>  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
</span><span class='line'>  at java.lang.Thread.run(Thread.java:679)</span></code></pre></td></tr></table></div></figure>


<h4>Solution: add client public ssh key to the Jenkins server at: <code>http://jenkins/user/USERNAME/configure</code> | <code>SSH Public Keys</code>.</h4>

<p><em>3</em>. Description:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>hudson.security.AccessDeniedException2: &lt;USERNAME&gt; is missing the Job/ExtendedRead permission
</span><span class='line'>  at hudson.security.ACL.checkPermission(ACL.java:54)
</span><span class='line'>  at hudson.model.AbstractItem.checkPermission(AbstractItem.java:446)
</span><span class='line'>  at hudson.cli.GetJobCommand.run(GetJobCommand.java:46)
</span><span class='line'>  at hudson.cli.CLICommand.main(CLICommand.java:234)
</span><span class='line'>  at hudson.cli.CliManagerImpl.main(CliManagerImpl.java:92)
</span><span class='line'>  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
</span><span class='line'>  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
</span><span class='line'>  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
</span><span class='line'>  at java.lang.reflect.Method.invoke(Method.java:606)
</span><span class='line'>  at hudson.remoting.RemoteInvocationHandler$RPCRequest.perform(RemoteInvocationHandler.java:300)
</span><span class='line'>  at hudson.remoting.RemoteInvocationHandler$RPCRequest.call(RemoteInvocationHandler.java:281)
</span><span class='line'>  at hudson.remoting.RemoteInvocationHandler$RPCRequest.call(RemoteInvocationHandler.java:240)
</span><span class='line'>  at hudson.remoting.UserRequest.perform(UserRequest.java:118)
</span><span class='line'>  at hudson.remoting.UserRequest.perform(UserRequest.java:48)
</span><span class='line'>  at hudson.remoting.Request$2.run(Request.java:328)
</span><span class='line'>  at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
</span><span class='line'>  at hudson.cli.CliManagerImpl$1.call(CliManagerImpl.java:63)
</span><span class='line'>  at hudson.remoting.InterceptingExecutorService$2.call(InterceptingExecutorService.java:95)
</span><span class='line'>  at jenkins.util.ContextResettingExecutorService$2.call(ContextResettingExecutorService.java:46)
</span><span class='line'>  at java.util.concurrent.FutureTask.run(FutureTask.java:262)
</span><span class='line'>  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
</span><span class='line'>  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
</span><span class='line'>  at java.lang.Thread.run(Thread.java:745)</span></code></pre></td></tr></table></div></figure>


<h4>Solution: Jenkins server &ndash;> Manage Jenkins &ndash;> Configure Global Security to add <USERNAME> related permissions.</h4>

<h3>References:</h3>

<ol>
<li><a href="http://www.blackpepper.co.uk/generating-new-jenkins-jobs-from-templates-and-parameterised-builds/">http://www.blackpepper.co.uk/generating-new-jenkins-jobs-from-templates-and-parameterised-builds/</a></li>
<li><a href="http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html">http://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html</a></li>
<li><a href="https://github.com/jenkinsci/jenkins">https://github.com/jenkinsci/jenkins</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Playing With Git Submodule]]></title>
    <link href="http://lifuzu.com/blog/2014/04/24/playing-with-git-submodule/"/>
    <updated>2014-04-24T22:01:03-07:00</updated>
    <id>http://lifuzu.com/blog/2014/04/24/playing-with-git-submodule</id>
    <content type="html"><![CDATA[<p><img src="https://lh4.googleusercontent.com/-GW4P0d8zZdM/U1nrsDaCgiI/AAAAAAAAB5I/4mTt3xjfmFo/s0/xlotte-git.jpg" title="xlotte-git.jpg" alt="enter image description here" /></p>

<h3>Intructions:</h3>

<ul>
<li>add a submodule</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git submodule add -b BRANCH ssh://REPO_URL/REPO_PATH SUBMODULE_PATH
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;add a submodule at SUBMODULE_PATH&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>clone the project with submodule(s)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git clone ssh://REPO_URL/REPO_PATH PROJECT
</span><span class='line'><span class="nb">cd </span>PROJECT
</span><span class='line'><span class="nv">$ </span>git submodule update --init --rebase
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>get submodule status</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git submodule status
</span><span class='line'><span class="nv">$ </span>git submodule foreach git branch -a
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>checkout all submodule to a branch defined in .gitmodule (which means we specify the branch when we add the submodule with &lsquo;-b BRANCH&rsquo;)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git submodule foreach -q --recursive <span class="s1">&#39;branch=&quot;$(git config -f $toplevel/.gitmodules submodule.$name.branch)&quot;; git checkout $branch&#39;</span>
</span><span class='line'><span class="c"># OR a short version</span>
</span><span class='line'><span class="nv">$ </span>git submodule foreach git checkout master
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>pull the latest master for all of the submodule</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git submodule -q foreach git pull -q origin master
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>develop in submodule</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Make your changes in submoduleA</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>submoduleA
</span><span class='line'><span class="nv">$ </span>git add .
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;Updated the submoduleA&quot;</span>
</span><span class='line'><span class="nv">$ </span>git push origin BRANCH
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>sync to project</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>PROJECT
</span><span class='line'><span class="nv">$ </span>git pull
</span><span class='line'><span class="nv">$ </span>git submodule update --rebase
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>manually update the project to track submodule (Gerrit submodule description commit the track automatically)</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>PROJECT
</span><span class='line'><span class="nv">$ </span>git add submoduleA
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;Updated submodule a.&quot;</span>
</span><span class='line'><span class="nv">$ </span>git push origin BRANCH_NAME
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>deinit, and remove a submodule</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git submodule deinit SUBMODULE_PATH
</span><span class='line'><span class="nv">$ </span>git rm SUBMODULE_PATH
</span><span class='line'><span class="nv">$ </span>git commit -m <span class="s2">&quot;remove the submodule at SUBMODULE_PATH&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>References:</h3>

<ol>
<li><a href="http://git-scm.com/docs/git-submodule">http://git-scm.com/docs/git-submodule</a></li>
<li><a href="http://git-scm.com/docs/git-rm.html">http://git-scm.com/docs/git-rm.html</a></li>
<li><a href="http://stackoverflow.com/questions/8642668/how-to-make-submodule-with-detached-head-to-be-attached-to-actual-head">http://stackoverflow.com/questions/8642668/how-to-make-submodule-with-detached-head-to-be-attached-to-actual-head</a></li>
<li><a href="http://www.vogella.com/tutorials/Git/article.html#submodules">http://www.vogella.com/tutorials/Git/article.html#submodules</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rename Repository on Gerrit]]></title>
    <link href="http://lifuzu.com/blog/2014/04/09/rename-repository-on-gerrit/"/>
    <updated>2014-04-09T22:42:53-07:00</updated>
    <id>http://lifuzu.com/blog/2014/04/09/rename-repository-on-gerrit</id>
    <content type="html"><![CDATA[<p><img src="https://lh4.googleusercontent.com/-_03bVFvmzzg/U0YvHJPBLCI/AAAAAAAAB4M/SSKXyOR_T3U/s0/diffymute-300x279.png" title="diffymute-300x279.png" alt="Gerrit icon" /></p>

<h3>Instructions:</h3>

<p><em>1</em>. Move the repository folder on server:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># on gerrit server</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$site_path</span>/git;
</span><span class='line'><span class="nv">$ </span>mv old_name.git new_name.git
</span></code></pre></td></tr></table></div></figure>


<p><em>2</em>. Flush the caches on server:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># On another client image:</span>
</span><span class='line'><span class="nv">$ </span>ssh -p 29418 gerrit.server.com gerrit flush-caches
</span></code></pre></td></tr></table></div></figure>


<p><em>3</em>. Run sql statement to update the changes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># On another client image (need &quot;Access Database&quot; capability):</span>
</span><span class='line'><span class="nv">$ </span>ssh -p 29418 gerrit.server.com gerrit gsql <span class="o">[</span>Enter<span class="o">]</span>
</span><span class='line'>gerrit&gt; USE <span class="o">{</span>Database<span class="o">}</span>;
</span><span class='line'>gerrit&gt; SELECT * FROM changes WHERE <span class="nv">dest_project_name</span> <span class="o">=</span> <span class="s1">&#39;old_name&#39;</span>;
</span><span class='line'><span class="c"># if have more than 1, run the following command to update, otherwise, quit with \q;</span>
</span><span class='line'>gerrit&gt; UPDATE changes SET <span class="nv">dest_project_name</span> <span class="o">=</span> <span class="s1">&#39;new_name&#39;</span> WHERE
</span><span class='line'><span class="nv">dest_project_name</span> <span class="o">=</span> <span class="s1">&#39;old_name&#39;</span>;
</span><span class='line'>gerrit&gt; <span class="se">\q</span>
</span></code></pre></td></tr></table></div></figure>


<h3>References:</h3>

<ol>
<li><a href="https://groups.google.com/forum/#!topic/repo-discuss/ltIxBipUPKI">https://groups.google.com/forum/#!topic/repo-discuss/ltIxBipUPKI</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Migrate Svn to Git]]></title>
    <link href="http://lifuzu.com/blog/2014/04/09/migrate-svn-to-git/"/>
    <updated>2014-04-09T22:21:27-07:00</updated>
    <id>http://lifuzu.com/blog/2014/04/09/migrate-svn-to-git</id>
    <content type="html"><![CDATA[<p><img src="https://lh6.googleusercontent.com/-zWvC0T4xLUM/U0YqARAy3HI/AAAAAAAAB34/N0PazinANn0/s0/svn_to_git-860x200.png" title="svn_to_git-860x200.png" alt="migrate svn to git" /></p>

<h3>Instructions:</h3>

<p><em>1</em>. Check out the source tree from SVN server with svn command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>svn co http://my-project.googlecode.com/svn/trunk
</span></code></pre></td></tr></table></div></figure>


<p><em>2</em>. Generate an users.txt with the command:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>svn log ^/ --xml | grep -P <span class="s2">&quot;^&lt;author&quot;</span> | sort -u | <span class="se">\</span>
</span><span class='line'>      perl -pe <span class="s1">&#39;s/&lt;author&gt;(.*?)&lt;\/author&gt;/$1 = /&#39;</span> &gt; users.txt
</span></code></pre></td></tr></table></div></figure>


<p>   and following the formatting:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>schacon = Scott Chacon &lt;schacon@geemail.com&gt;
</span><span class='line'>selse = Someo Nelse &lt;selse@geemail.com&gt;
</span></code></pre></td></tr></table></div></figure>


<p><strong>NOTE</strong>: You can try the script to generate authors list automatically: <a href="https://gist.github.com/lifuzu/9081923#file-findauthors-sh">https://gist.github.com/lifuzu/9081923#file-findauthors-sh</a></p>

<p><em>3</em>. Once the users.txt is ready, then checkout the source tree again with the command &lsquo;git svn clone&rsquo;:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git svn clone http://my-project.googlecode.com/svn/ <span class="se">\</span>
</span><span class='line'>      --authors-file<span class="o">=</span>users.txt --no-metadata -s my_project
</span></code></pre></td></tr></table></div></figure>


<p><em>4</em>. To move the tags to be proper Git tags, run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git <span class="k">for</span>-each-ref refs/remotes/tags | cut -d / -f 4- | grep -v @ | <span class="k">while </span><span class="nb">read </span>tagname; <span class="k">do </span>git tag <span class="s2">&quot;$tagname&quot;</span> <span class="s2">&quot;tags/$tagname&quot;</span>; git branch -r -d <span class="s2">&quot;tags/$tagname&quot;</span>; <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>5</em>. To move the rest of the references under refs/remotes to be local branches:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git <span class="k">for</span>-each-ref refs/remotes | cut -d / -f 3- | grep -v @ | <span class="k">while </span><span class="nb">read </span>branchname; <span class="k">do </span>git branch <span class="s2">&quot;$branchname&quot;</span> <span class="s2">&quot;refs/remotes/$branchname&quot;</span>; git branch -r -d <span class="s2">&quot;$branchname&quot;</span>; <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>6</em>. Adding the git server as a remote:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git remote add origin git@my-git-server:myrepository.git
</span></code></pre></td></tr></table></div></figure>


<p><em>7</em>. Push all your branches and tags to go up:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git push origin --all
</span><span class='line'><span class="nv">$ </span>git push origin --tags
</span></code></pre></td></tr></table></div></figure>


<p><em>8</em>. Update the changes from SVN (before you update, please cleanup your local workspace)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git svn fetch
</span><span class='line'>...
</span><span class='line'><span class="nv">r81152</span> <span class="o">=</span> c2465633b56d16081334336ee87d506b97d10449 <span class="o">(</span>refs/remotes/git-svn<span class="o">)</span>
</span><span class='line'><span class="nv">$ </span>git checkout master
</span><span class='line'><span class="nv">$ </span>git merge remotes/git-svn
</span></code></pre></td></tr></table></div></figure>


<p><strong>NOTE</strong>: Sometimes when you run <code>git svn fetch</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>...
</span><span class='line'><span class="nv">r81217</span> <span class="o">=</span> eb79c770f852f6158a583bb17a8c1a326f7b4e03 <span class="o">(</span>refs/remotes/trunk<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you need to run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git checkout master
</span><span class='line'><span class="nv">$ </span>git merge remotes/trunk
</span></code></pre></td></tr></table></div></figure>


<p><em>9</em>. Then check them into GIT</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git log <span class="c"># should have some changes merged from SVN</span>
</span><span class='line'><span class="nv">$ </span>git push origin master
</span></code></pre></td></tr></table></div></figure>


<p><em>10</em>. If you have a temporary migration branch you modified something on that, then you need rebase the changes on master to migration:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git checkout migration
</span><span class='line'><span class="nv">$ </span>git rebase master  <span class="c"># fix the conflicts if have</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>11</em>. Finally, you need merge the changes on migration, fast forward, since you have rebased.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>git checkout master
</span><span class='line'><span class="nv">$ </span>git merge migration
</span></code></pre></td></tr></table></div></figure>


<p>That is it!</p>

<h3>Reference:</h3>

<ol>
<li><a href="http://git-scm.com/book/en/Git-and-Other-Systems-Migrating-to-Git">http://git-scm.com/book/en/Git-and-Other-Systems-Migrating-to-Git</a></li>
<li><a href="http://git-scm.com/book/ch3-6.html">http://git-scm.com/book/ch3-6.html</a></li>
<li><a href="http://stackoverflow.com/questions/16565991/keep-svn-repository-in-sync-with-git-one">http://stackoverflow.com/questions/16565991/keep-svn-repository-in-sync-with-git-one</a></li>
<li><a href="http://stackoverflow.com/questions/5241898/is-a-bidrectional-git-svn-sync-both-writable-possible">http://stackoverflow.com/questions/5241898/is-a-bidrectional-git-svn-sync-both-writable-possible</a></li>
</ol>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://lifuzu.com/blog/2014/02/13/waterfall-is-trip-agile-is-journey/"/>
    <updated>2014-02-13T11:03:12-08:00</updated>
    <id>http://lifuzu.com/blog/2014/02/13/waterfall-is-trip-agile-is-journey</id>
    <content type="html"><![CDATA[<p><a href="http://theadaptivepm.wordpress.com/2013/09/10/if-waterfall-is-a-trip-then-agile-is-a-journey/">http://theadaptivepm.wordpress.com/2013/09/10/if-waterfall-is-a-trip-then-agile-is-a-journey/</a>
<img src="http://cdn.moj.managementisajourney.com/wp-content/uploads/2013/04/Road-Journey.jpg" alt="road journey" />
/</p>

<!--more-->


<p>/</p>

<p></p>

<p>AB &ndash;  &ndash; </p>

<p> &ndash;  &ndash;  </p>

<p></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Raft - Distributed Consensus Protocol]]></title>
    <link href="http://lifuzu.com/blog/2014/01/25/raft-distributed-consensus-protocol/"/>
    <updated>2014-01-25T11:52:13-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/25/raft-distributed-consensus-protocol</id>
    <content type="html"><![CDATA[<p>Rafe is a distributed consensus protocol, which allows a collection of processes to maintain consistency even in the face of multiple node failure. The two main tenants of the protocol are leader election and log replication.</p>

<!-- more -->


<h3>Learn Notes</h3>

<h4>Raft &ndash; Distributed Consensus</h4>

<ul>
<li>State

<ul>
<li>Follower

<ul>
<li>up to Candidate, if it can&rsquo;t hear from leader (i.e. stop receiving heartbeats)</li>
<li>all nodes initial state</li>
</ul>
</li>
<li>Condidate

<ul>
<li>up to Leader, if it gets votes from a majority of nodes</li>
<li>down to Follower, if it gets &ldquo;Request Vote&rdquo;</li>
</ul>
</li>
<li>Leader

<ul>
<li>down to follower, when it sees the higher election term</li>
<li>all changes to the system go through the leader</li>
<li>only one in a system</li>
</ul>
</li>
</ul>
</li>
<li>Activity

<ul>
<li>Leader Election

<ul>
<li>1. send &lsquo;Request Vote&rsquo; by Candidate</li>
<li>2. if the receiving node hasn&rsquo;t voted yet in this term then it votes for the candidate</li>
<li>3. then the node resets its election timeout</li>
<li>4. once a candidate has a majority of votes</li>
<li>5. it becomes leader</li>
</ul>
</li>
<li>Log Replication

<ul>
<li>1. a client send a change to the leader</li>
<li>2. the change is appended to the leader&rsquo;s log, uncommited</li>
<li>3. the change is sent/replicate to the followers on the next heartbeat</li>
<li>4. an entry is committed on leader once a majority of followers acknowledge it</li>
<li>5. the leader notifies the followers than the entry is committed</li>
<li>6. a response is sent to the client</li>
</ul>
</li>
</ul>
</li>
<li>Message

<ul>
<li>Append Entries

<ul>
<li>Original from Leader</li>
<li>Respond by Followers</li>
<li>In a intervals specified by the heartbeat timeout</li>
</ul>
</li>
<li>Request Vote

<ul>
<li>Original from Candidate</li>
<li>Votes by the receiving nodes (one for each node, at same term)</li>
<li>Immediately</li>
</ul>
</li>
</ul>
</li>
<li>Timeout

<ul>
<li>Election Timeout

<ul>
<li>the amount of time a follower waits until becoming a candidate</li>
<li>randomized to be between 150ms and 300ms</li>
<li>doesn&rsquo;t occur on Leader</li>
</ul>
</li>
<li>Heatbeat Timeout

<ul>
<li>should be shorter than Election Timeout</li>
<li>occurs on all nodes</li>
</ul>
</li>
</ul>
</li>
<li>Guarantee

<ul>
<li>because: requiring a majority of votes</li>
<li>only one leader can be elected per term</li>
</ul>
</li>
</ul>


<h3>JSON expression</h3>

<p>Here is a json, try to express the node to communicate with Raft protocol:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;message_type&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;REQUEST_VOTE&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;VOTE&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;APPEND_ENTRIES&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;RESPOND_to_append_entries&quot;</span>
</span><span class='line'>  <span class="p">],</span>
</span><span class='line'>  <span class="nt">&quot;heartbeat&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;election&quot;</span><span class="p">:</span> <span class="s2">&quot;random_time(150-300ms)&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;random_string&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;follower&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;send_message&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;to&quot;</span><span class="p">:</span> <span class="s2">&quot;who&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;message_type&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;reset_timeout&quot;</span><span class="p">:</span> <span class="s2">&quot;timeout_type: heartbeat|election&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;stop_election&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;leader&quot;</span><span class="p">:</span> <span class="s2">&quot;who&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;term&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;no&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;vote_count&quot;</span><span class="p">:</span> <span class="mi">1</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Reference:</h3>

<ol>
<li><a href="https://ramcloud.stanford.edu/wiki/download/attachments/11370504/raft.pdf">https://ramcloud.stanford.edu/wiki/download/attachments/11370504/raft.pdf</a></li>
<li><a href="http://thesecretlivesofdata.com/raft/">http://thesecretlivesofdata.com/raft/</a></li>
</ol>


<blockquote><p>Supported by <a href="http://sourceforge.net/projects/freeplane/">FreePlane</a>, a great mind map editor.
Supported by <a href="http://jsoneditoronline.org/">JSON Editor Online</a>.
Supported by <a href="https://github.com/neocotic/html.md">HTML to MD</a>.
Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://lifuzu.com/blog/2014/01/22/produc-design-sprint/"/>
    <updated>2014-01-22T22:31:40-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/22/produc-design-sprint</id>
    <content type="html"><![CDATA[<p><a href="http://www.designstaff.org/articles/product-design-sprint-2012-10-02.html">http://www.designstaff.org/articles/product-design-sprint-2012-10-02.html</a></p>

<p> </p>

<p>40<a href="http://custommade.com/">CustomMade</a></p>

<iframe width="560" height="315" src="http://lifuzu.com//www.youtube.com/embed/qvdO0G4uQgc" frameborder="0" allowfullscreen></iframe>




<!-- more -->


<hr />

<p>DIY</p>

<p><a href="http://www.designstaff.org/articles/product-design-sprint-2-2012-10-09.html"></a>
</p>

<p><a href="http://www.designstaff.org/articles/product-design-sprint-day-1-understand-2012-10-16.html">1</a>
</p>

<p><a href="http://www.designstaff.org/articles/product-design-sprint-day-2-diverge-2012-10-26.html">2</a>
</p>

<p><a href="http://www.designstaff.org/articles/product-design-sprint-day-3-decide-2012-11-20.html">3</a>
</p>

<p><a href="http://www.designstaff.org/articles/product-design-sprint-day-4-prototype-2013-01-07.html">4</a>
</p>

<p><a href="http://www.designstaff.org/articles/product-design-sprint-day-5-validate-2013-03-07.html">5</a>
</p>

<hr />

<p><a href="http://www.ideo.com/">IDEO</a><a href="http://dschool.stanford.edu/"></a><a href="http://en.wikipedia.org/wiki/Design_thinking"></a></p>

<h3></h3>

<p><a href="http://blogs.hbr.org/cs/2012/09/the_secret_phrase_top_innovato.html">IDEO</a></p>

<p> &ndash; </p>

<p></p>

<p></p>

<p></p>

<h3></h3>

<p></p>

<p>Gmail</p>

<p>Google+2Google</p>

<p></p>

<p> &ndash;  &ndash; </p>

<p></p>

<h3>IDEO</h3>

<p>IDEOJason Cornwell<a href="http://gmailblog.blogspot.com/2011/05/introducing-people-widget.html">Gmail</a></p>

<p></p>

<p>ChromeX</p>

<h3>10</h3>

<p>CEO</p>

<p> &ndash; Bug<a href="http://keynotopia.com/guides/"></a>Photoshop<a href="http://www.designstaff.org/articles/rapid-user-research-2012-09-19.html"></a><a href="http://www.designstaff.org/articles/recruiting-how-to-find-great-participants-for-your-user-study-2012-02-22.html"></a><a href="http://www.designstaff.org/articles/get-better-data-from-user-studies-interviewing-tips-2012-03-07.html"></a></p>

<p></p>

<p> &ndash; </p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sprint]]></title>
    <link href="http://lifuzu.com/blog/2014/01/21/product-design-sprint/"/>
    <updated>2014-01-21T11:22:14-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/21/product-design-sprint</id>
    <content type="html"><![CDATA[<p><a href="http://robots.thoughtbot.com/the-product-design-sprint">http://robots.thoughtbot.com/the-product-design-sprint</a></p>

<p>Sprint5Sprint</p>

<p>SprintSprint</p>

<p>Sprint</p>

<h3></h3>

<p><a href="http://en.wikipedia.org/wiki/Design_thinking"></a>Sprint</p>

<h4></h4>

<p></p>

<p></p>

<p>15</p>

<h4></h4>

<p></p>

<p></p>

<p></p>

<p>2//</p>

<h4></h4>

<p>/35</p>

<p>Sprint</p>

<!-- more -->


<h4>Sprint</h4>

<p>Sprint5</p>

<p></p>

<p>
<img src="http://robots.thoughtbot.com/images/the-product-design-sprint/sprint-phases.png" alt="Sprint Phase" /></p>

<h5>1</h5>

<p><strong></strong></p>

<p></p>

<p></p>

<p><strong></strong></p>

<p></p>

<p></p>

<p><strong></strong></p>

<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li>/</li>
<li>/</li>
<li></li>
</ul>


<p></p>

<p><strong></strong></p>

<ul>
<li></li>
<li>Sprint</li>
</ul>


<h5>2</h5>

<p><strong></strong></p>

<p></p>

<p></p>

<p><strong></strong></p>

<p></p>

<p><strong></strong></p>

<ul>
<li>&hellip;&hellip;</li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>


<p><strong></strong></p>

<ul>
<li><p><em></em>
<img src="http://robots.thoughtbot.com/images/the-product-design-sprint/criticalpath.jpg" alt="" /></p></li>
<li><p><em></em></p></li>
</ul>


<h5>3</h5>

<p><strong></strong></p>

<p>12</p>

<p>4</p>

<p><strong></strong></p>

<p></p>

<p><strong></strong></p>

<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>


<p><strong></strong></p>

<ul>
<li><p><em></em>4
<img src="http://robots.thoughtbot.com/images/the-product-design-sprint/storyboard.jpg" alt="" /></p></li>
<li><p><em></em>
<img src="http://robots.thoughtbot.com/images/the-product-design-sprint/assumptions.jpg" alt="" /></p></li>
</ul>


<h5>4</h5>

<p><strong></strong></p>

<p></p>

<p>HTML/ CSS</p>

<p>Sprint</p>

<p><strong></strong></p>

<p></p>

<p><strong></strong></p>

<ul>
<li></li>
</ul>


<p><strong></strong></p>

<ul>
<li></li>
<li></li>
</ul>


<h5>5</h5>

<p><strong></strong></p>

<p></p>

<p></p>

<p><strong></strong></p>

<p></p>

<p><strong></strong></p>

<ul>
<li></li>
<li></li>
</ul>


<p><strong></strong>
&ndash; /
&ndash; Sprint</p>

<h4></h4>

<p>SprintIDEO<a href="http://www.ideo.com/work/human-centered-design-toolkit/"></a><a href="http://www.designstaff.org/articles/product-design-sprint-2012-10-02.html"></a></p>

<p></p>

<p>Sprint</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[]]></title>
    <link href="http://lifuzu.com/blog/2014/01/19/be-a-great-developer/"/>
    <updated>2014-01-19T23:16:58-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/19/be-a-great-developer</id>
    <content type="html"><![CDATA[<p><a href="https://the-pastry-box-project.net/ed-finkler/2014-january-6">https://the-pastry-box-project.net/ed-finkler/2014-january-6</a></p>

<ul>
<li><p><a href="http://funkatron.com/posts/empathy-is-our-most-important-attribute.html"></a></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p>5</p></li>
<li><p> &ndash; </p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p>XY</p></li>
<li><p></p></li>
<li><p>PHP|Python|JavaScript|</p></li>
<li><p>/</p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
<li><p></p></li>
</ul>


<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Thoughs About Alias Settings in .bashrc]]></title>
    <link href="http://lifuzu.com/blog/2014/01/13/thoughs-about-alias-in-bashrc/"/>
    <updated>2014-01-13T21:24:27-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/13/thoughs-about-alias-in-bashrc</id>
    <content type="html"><![CDATA[<p>Sometimes, when we install a package, just as, tomcat, we need to append some lines in .bashrc to add and export the tomcat/bin in the system PATH, then source the entire .bashrc to enable it. It is some a little risky (when you forget append $PATH, :) ) and painful, especially when we try to automate the installation process.</p>

<p>When we have several machines, we always need to synchronize the .bashrc file among them. I hate to copy them when I have more than 3 boxes.</p>

<p>Then I have the below thoughs to simplify it, with a github repository. Of course, you don&rsquo;t need do these things manually again, Just try to clone the github repo at the bottom of this article.</p>

<p><strong>1</strong>. We can create a folder, name it as:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>~/.bashrc.d/
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>inspired by rc.d, init.d, conf.d etc;</p></blockquote>

<p><strong>2</strong>. We create some files under the folder, name them as:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>~/.bashrc.d/linux/git.alias.bash
</span><span class='line'>~/.bashrc.d/linux/java.path.bash
</span><span class='line'>~/.bashrc.d/linux/editor.bash
</span></code></pre></td></tr></table></div></figure>


<p><strong>3</strong>. We add an entry point into ~/.bashrc:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">OS</span><span class="o">=</span><span class="k">$(</span> uname | tr <span class="s1">&#39;[:upper:]&#39;</span> <span class="s1">&#39;[:lower:]&#39;</span><span class="k">)</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -d <span class="nv">$HOME</span>/.bashrc.d <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">  for </span>SCRIPT in <span class="k">$(</span> ls <span class="nv">$HOME</span>/.bashrc.d/<span class="k">${</span><span class="nv">OS</span><span class="k">}</span>/* <span class="k">)</span>; <span class="k">do</span>
</span><span class='line'>    . <span class="k">${</span><span class="nv">SCRIPT</span><span class="k">}</span>
</span><span class='line'>  <span class="k">done</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>4</strong>. Then we run the source command to enable them:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">source</span> ~/.bashrc
</span></code></pre></td></tr></table></div></figure>


<p><strong>5</strong>. Done!</p>

<p>Here is the repository:</p>

<p><a href="https://github.com/lifuzu/bashrc.d.git">https://github.com/lifuzu/bashrc.d.git</a></p>

<p>Run the command to clone it, fork it, and enjoy!</p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2014]]></title>
    <link href="http://lifuzu.com/blog/2014/01/10/dev-tech-hot-2004-2/"/>
    <updated>2014-01-10T21:33:11-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/10/dev-tech-hot-2004-2</id>
    <content type="html"><![CDATA[<p><a href="http://java.dzone.com/articles/dev-tech-will-be-hot-2014">http://java.dzone.com/articles/dev-tech-will-be-hot-2014</a></p>

<p><a href="http://lifuzu.com/blog/2014/01/09/dev-tech-hot-2004/"></a></p>

<h3>DigitalOcean</h3>

<p><img src="http://java.dzone.com/sites/all/files/digital%20ocean.png" alt="DigitalOcean" /></p>

<p>DigitalOcean280490K<a href="http://css.dzone.com/articles/digitalocean-growth-rate">AWS</a></p>

<p>DigitalOceanSSDIaaS20142013</p>

<!--more-->


<h3>FoundationDB</h3>

<p><img src="http://java.dzone.com/sites/all/files/foundationdb.png" alt="FoundationDB" /></p>

<p><a href="http://java.dzone.com/articles/sql-new-nonosql">NoNoSQL</a>NoSQLRDBMS2014NoSQLACID</p>

<p>PostgresFoundationDB FoundationDBACID</p>

<h3>Chrome DevTools</h3>

<p><img src="http://java.dzone.com/sites/all/files/chromedevtools.png" alt="Chrome DevTools" /></p>

<p>Web2014DevTools<a href="http://www.html5rocks.com/en/tutorials/developertools/mobile"></a></p>

<p><a href="http://alistapart.com/author/rmurphey">Rebecca Murphey</a>DevToolsIDE</p>

<h3>asm.js</h3>

<p><img src="http://java.dzone.com/sites/all/files/asmjs.png" alt="asm.js" /></p>

<p><a href="http://ejohn.org/blog/asmjs-javascript-compile-target">John Resig</a><a href="http://www.2ality.com/2013/02/asm-js.html">JavaScript</a>JavaScriptJavaScript<a href="http://asmjs.org/">asm.js</a></p>

<h3>WebRTC</h3>

<p><img src="http://java.dzone.com/sites/all/files/webrtc.png" alt="WebRTC" /></p>

<p><a href="http://www.webrtc.org/">WebRTC</a>JavaScript API2014</p>

<h3>WebCSS</h3>

<p><img src="http://java.dzone.com/sites/all/files/w3c.png" alt="WebCSS" /></p>

<p><a href="http://www.2ality.com/">Axel Rauschmayer</a>JavaScript<a href="http://www.w3.org/TR/components-intro/">Web</a>Web<a href="http://www.w3.org/TR/components-intro/#shadow-dom-section">DOM</a></p>

<p><a href="http://dev.w3.org/csswg/css-grid/">CSS</a>CSSCSSCSS</p>

<h3>Silex, Composer, and Slim</h3>

<p><img src="http://java.dzone.com/sites/all/files/silex.png" alt="Silex, Composer, and Slim" /></p>

<p>PHP<a href="http://www.lornajane.net/">Lorna Mitchell</a>PHPLorna Mitchell<a href="http://getcomposer.org/">Composer</a>PHPRubybundlerNode.jsNPM</p>

<p>2014Composer<a href="http://www.slimframework.com/">Slim</a><a href="http://silex.sensiolabs.org/">Silex</a>PHP Web</p>

<h3>Pandas and Vincent</h3>

<p><img src="http://java.dzone.com/sites/all/files/pandas.png" alt="Pandas and Vincent" /></p>

<p>Python<a href="http://www.mahdiyusuf.com/">Mahdi Yusuf</a>Python<a href="http://pandas.pydata.org/">Pandas</a><a href="https://github.com/wrobstory/vincent">Vincent</a>2014PandasPythonVincentVega</p>

<p>Mahdi<a href="https://www.neckbeardrepublic.com/screencasts/pandas-vincent"></a><a href="https://www.neckbeardrepublic.com/">Neckbeard Republic</a>Python</p>

<h3>SignalR 2.0</h3>

<p><img src="http://java.dzone.com/sites/all/files/signalr.png" alt="SignalR 2.0" /></p>

<p><a href="http://blog.filipekberg.se/">Filip Ekberg</a>.NET SignalR.NET</p>

<p>SignalRWeb<a href="http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/tutorial-getting-started-with-signalr-20"></a>SignalR2.0</p>

<h3>CocoaPodsReactiveCocoa</h3>

<p><img src="http://java.dzone.com/sites/all/files/cocoapods.png" alt="CocoaPodsReactiveCocoa" /></p>

<p><a href="http://www.alexcurylo.com/blog/">Alex Curylo</a>iOS<a href="http://cocoapods.org/">CocoaPods</a> CocoaPodsAlexDZONEiOS MVB<a href="http://java.dzone.com/articles/concise-introduction-cocoapods">CocoPods</a></p>

<p>Alex<a href="https://github.com/ReactiveCocoa/ReactiveCocoa">ReactiveCocoa</a><a href="http://en.wikipedia.org/wiki/Functional_reactive_programming"></a>API</p>

<h3></h3>

<p><img src="http://java.dzone.com/sites/all/files/offlinejs.png" alt="" /></p>

<p>UXweb<a href="http://alistapart.com/article/offline-first"></a></p>

<p><a href="http://github.hubspot.com/offline/docs/welcome">Offline.js</a>Web2014</p>

<p>31</p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2014]]></title>
    <link href="http://lifuzu.com/blog/2014/01/09/dev-tech-hot-2004/"/>
    <updated>2014-01-09T23:19:52-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/09/dev-tech-hot-2004</id>
    <content type="html"><![CDATA[<p><a href="http://java.dzone.com/articles/dev-tech-will-be-hot-2014">http://java.dzone.com/articles/dev-tech-will-be-hot-2014</a></p>

<p>30+2014PythonPHPJSJavaNET</p>

<h3>Docker</h3>

<p><img src="http://java.dzone.com/sites/all/files/docker.png" alt="Docker" /></p>

<p>DockerdotCloudDocker</p>

<p>DockerDocker</p>

<p>DockerVagrant</p>

<!--more-->


<h3>AngularJS</h3>

<p><img src="http://java.dzone.com/sites/all/files/angular.png" alt="AngularJS" /></p>

<p><a href="http://angularjs.org/"></a> Ember.jsAngularJSEmber</p>

<p>2014WebAngularJS<a href="http://angular-tips.com/blog/2013/08/why-does-angular-dot-js-rock">AngularJS</a></p>

<h3>Ghost</h3>

<p><img src="http://java.dzone.com/sites/all/files/ghost_01.jpg" alt="Ghost" /></p>

<p>GhostNode.jsWordPressUI
GhostNode.jsJavaScript</p>

<h3>Zurb Foundation 5</h3>

<p><img src="http://java.dzone.com/sites/all/files/foundation.png" alt="Zurb Foundation 5" /></p>

<p>TwitterBootstrapZurb FoundationCSSCSS<a href="http://foundation.zurb.com/">Foundation</a> TwitterBootstrapTwitterBootstrap</p>

<p>ZurbZurb Foundation 5BootstrapTwitterBootstrapFoundationFoundation2014Bootstrap</p>

<h3>Grunt/Bower</h3>

<p><img src="http://java.dzone.com/sites/all/files/YEOMAN.png" alt="Grunt/Bower" /></p>

<p></p>

<p>Addy OsmaniYeomanGruntBowerJavaScriptGruntJavaScriptRubyWeb</p>

<h3>Discourse</h3>

<p><img src="http://java.dzone.com/sites/all/files/discourse.png" alt="Discourse" /></p>

<p>Jeff Atwood2014rubyHeroku<a href="https://discussion.heroku.com/">Discourse</a>Discourse</p>

<p>DiscourseRuby</p>

<h3>Coinbase</h3>

<p><img src="http://java.dzone.com/sites/all/files/coinbase.png" alt="Coinbase" /></p>

<p><a href="http://coinbase.com/">Coinbase</a>2014Bitcoin</p>

<h3>Steam Machines</h3>

<p><img src="http://java.dzone.com/sites/all/files/steam.png" alt="Steam Machines" /></p>

<p>Xbox OnePS4<a href="http://store.steampowered.com/livingroom/SteamMachines"></a>Steam Machines20152014<a href="https://www.humblebundle.com/">Humble Indie Bundles</a></p>

<h3>Screenhero</h3>

<p><img src="http://java.dzone.com/sites/all/files/screenhero.png" alt="Screenhero" /></p>

<p> <a href="http://screenhero.com/">Screenhero</a>WindowsMacMacPC</p>

<h3>StackEdit</h3>

<p><img src="http://java.dzone.com/sites/all/files/stackedit.png" alt="StackEdit" /></p>

<p><a href="https://stackedit.io">StackEdit</a>MarkdownWebMouStackEditMarkdown</p>

<h3>FitBit</h3>

<p><img src="http://java.dzone.com/sites/all/files/fitbit.png" alt="FitBit" /></p>

<p><a href="http://www.fitbit.com/"></a>2014</p>

<p>FitBit+</p>

<h3>Arduino/Espruino</h3>

<p><img src="http://java.dzone.com/sites/all/files/espruino.png" alt="Arduino/Espruino" /></p>

<p>FitBit2014 &ndash; ArduinoFitBit</p>

<p>KickstarterEspruinoJavaScriptArduino2014</p>

<h3>OpenShift</h3>

<p><img src="http://java.dzone.com/sites/all/files/openshift.png" alt="OpenShift" /></p>

<p>PaaS<a href="https://www.openshift.com/">OpenShift</a>PaaS</p>

<p>RedhatOpenShiftGhostOpenShift</p>

<p>&lt;></p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[10]]></title>
    <link href="http://lifuzu.com/blog/2014/01/07/10-ways-modern-enterprise-performance-management-changing-businesses/"/>
    <updated>2014-01-07T21:20:12-08:00</updated>
    <id>http://lifuzu.com/blog/2014/01/07/10-ways-modern-enterprise-performance-management-changing-businesses</id>
    <content type="html"><![CDATA[<p><a href="http://thenextweb.com/entrepreneur/2013/12/28/10-ways-modern-enterprise-performance-management-changing-businesses/">http://thenextweb.com/entrepreneur/2013/12/28/10-ways-modern-enterprise-performance-management-changing-businesses/</a></p>

<p><img src="http://cdn2.tnwcdn.com/wp-content/blogs.dir/1/files/2013/05/160620356-645x250.jpg" alt="10" /></p>

<p>90</p>

<p>C</p>

<p>EPMEPM</p>

<p>EPM10</p>

<!--more-->


<h3>1. </h3>

<p><a href="http://www.forbes.com/sites/louiscolumbus/2013/12/03/idcs-top-ten-technology-predictions-for-2014-cloud-spending-will-exceed-100b/">IDC</a>2014251000 &ndash; </p>

<p> EPM</p>

<h3>2. </h3>

<p><a href="http://thenextweb.com/apps/2013/10/31/optimize-mobile-apps-different-os/"></a></p>

<p>EPM &ndash; </p>

<h3>3. </h3>

<p>EPM &ndash; </p>

<p></p>

<h3>4. </h3>

<p></p>

<p><a href="https://www.yammer.com/">Yammer</a><a href="https://www.box.com/">Box</a> IDC201660500</p>

<p>EPM</p>

<h3>5. CFO</h3>

<p>CFOGartnerCFO40IT</p>

<p>CFOEPM</p>

<h3>6. </h3>

<p>EPM</p>

<p><a href="http://www.linkedin.com/today/post/article/20131210125224-1336307-big-idea-2014-the-warm-embrace-of-context?trk=prof-post"></a> </p>

<h3>7. </h3>

<p>EPM RFID</p>

<h3>8. </h3>

<p>IT</p>

<p><a href="http://thenextweb.com/entrepreneur/2013/11/06/enterprise-cloud-will-kill-mobile-device-management/"></a></p>

<h3>9. </h3>

<p>CFO4<a href="http://www.journalofaccountancy.com/Issues/2013/Oct/20137811.htm"></a>525</p>

<p>CFO</p>

<h3>10. </h3>

<p></p>

<p>CFOEPM &ndash;  &ndash; - </p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
</feed>
